<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
  </head>
  <body>
    <button id="button1">点击按钮1</button>
    <button id="button2">点击按钮2</button>
    <button id="button3">点击按钮3</button>

    <script>
      // 首先在页面中完成这些按钮的“绘制”：
      var button1 = document.getElementById('button1')
      var button2 = document.getElementById('button2')
      var button3 = document.getElementById('button3')
      // 接下来定义setCommand 函数，setCommand 函数负责往按钮上面安装命令。
      var setCommand = function (button, command) {
        button.onclick = function () {
          command.execute()
        }
      }
    </script>
    <!-- 负责编写点击按钮之后的具体行为 -->
    <script>
      var MenuBar = {
        refresh: function () {
          console.log('刷新菜单目录')
        },
      }
      var SubMenu = {
        add: function () {
          console.log('增加子菜单')
        },
        del: function () {
          console.log('删除子菜单')
        },
      }
      // 在让button 变得有用起来之前，我们要先把这些行为都封装在命令类中：
      class RefreshMenuBarCommand {
        constructor(receiver) {
          this.receiver = receiver
        }
        execute() {
          this.receiver.refresh()
        }
      }
      class DelSubMenuCommand {
        constructor(receiver) {
          this.receiver = receiver
        }
        execute() {
          this.receiver.del()
        }
      }
      class AddSubMenuCommand {
        constructor(receiver) {
          this.receiver = receiver
        }
        execute() {
          this.receiver.add()
        }
      }
    </script>

    <script>
      // 最后就是把命令接收者传入到command 对象中，并且把command 对象安装到button 上面：
      var refreshMenuBarCommand = new RefreshMenuBarCommand(MenuBar)
      var addSubMenuCommand = new AddSubMenuCommand(SubMenu)
      var delSubMenuCommand = new DelSubMenuCommand(SubMenu)
      setCommand(button1, refreshMenuBarCommand)
      setCommand(button2, addSubMenuCommand)
      setCommand(button3, delSubMenuCommand)
    </script>
  </body>
</html>
